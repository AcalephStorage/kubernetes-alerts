language: go

env:
  - GIMME_OS=linux GIMME_ARCH=amd64
  - GIMME_OS=darwin GIMME_ARCH=amd64
  - GIMME_OS=freebsd GIMME_ARCH=amd64

install:
  - go get github.com/constabulary/gb/...
  - gb vendor restore

script: make build

deploy:
  provider: releases
  api_key: "44023bd10779a5365764e4809513df11141ad4aa"
  file:
    - kube-alerts-linux-amd64
    - kube-alerts-freebsd-amd64
    - kube-alerts-darwin-amd64
  skip_cleanup: true
  on:
    tags: true
